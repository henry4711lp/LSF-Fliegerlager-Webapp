<!DOCTYPE html>
<html style="font-size: 16px" lang="de">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <title>drinkselector</title>
    <link rel="stylesheet" href="{{ url_for('static',filename='styles/nicepage.css')}}" media="screen" />
    <link rel="stylesheet" href="{{ url_for('static',filename='styles/drinkselector.css')}}" media="screen">
    <link rel="stylesheet" href="../static/styles/drinkselector.css" media="screen" />
    <link rel='shortcut icon' type='image/x-icon' href="{{ url_for('static',filename='favicon.ico') }}">
    <script class="u-script" type="text/javascript" src="{{ url_for('static',filename='jquery.js')}}" defer=""></script>
    <script
      class="u-script"
      type="text/javascript"
      src="{{ url_for('static',filename='nicepage.js')}}"
      defer=""
    ></script>
    <meta name="generator" content="Nicepage 4.18.5, nicepage.com" />
    <link id="u-theme-google-font" rel="stylesheet" href="{{ url_for('static',filename='styles/fonts.css')}}" />
    <link
      id="u-page-google-font"
      rel="stylesheet"
      href="{{ url_for('static',filename='styles/drinkselector-fonts.css')}}"
    />

    <meta name="theme-color" content="#478ac9" />
    <meta property="og:title" content="drinkselector" />
    <meta property="og:description" content="" />
    <meta property="og:type" content="website" />
  </head>
  <body class="u-body u-xl-mode" data-lang="de">
    <header class="u-clearfix u-header u-header" id="sec-015a">
      <div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <h1 class="u-custom-font u-font-raleway u-text u-text-default u-title u-text-1">LSF Strichliste</h1>
        <a class="u-image u-logo u-image-1" data-image-width="1500" data-image-height="1409">
          <img src="{{ url_for('static',filename='images/logo_trans.svg')}}" class="u-logo-image u-logo-image-1" />
        </a>
      </div>
    </header>
    <section class="u-align-center u-clearfix u-section-1" id="sec-1963">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-text u-text-1">
          Getr채nke&nbsp;<span class="u-file-icon u-icon"
            ><img src="{{ url_for('static',filename='images/931949.png')}}" alt=""
          /></span>
        </h2>
        <p class="u-text u-text-2">W채hle dein Essen f체r den {{mealdate}}:</p>
        <div class="u-clearfix u-expanded-width u-gutter-20 u-layout-wrap u-layout-wrap-1">
          <div class="u-gutter-0 u-layout">
            <div class="u-layout-row">
              <div
                class="u-align-center u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-container-style u-image u-layout-cell u-left-cell u-size-15 u-image-1"
                data-image-width="1280"
                data-image-height="1032"
                data-animation-name="flipIn"
                data-animation-duration="1000"
                data-animation-direction="X"
              >
                <div id="beer" class="u-container-layout u-container-layout-1 drink">
                  <h4 class="u-text u-text-3">Normal</h4>
                  <h2 class="u-text u-text-4">{{normal_price}}</h2>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-1 plus"
                    ><span class="u-file-icon u-icon"
                      ><img src="{{ url_for('static',filename='images/4315609.png')}}" alt=""
                    /></span>
                  </button>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-2 minus"
                    >&nbsp;<span class="u-file-icon u-icon u-icon-3"
                      ><img src="{{ url_for('static',filename='images/4436695.png')}}" alt=""
                    /></span>
                  </button>
                  <h3
                    class="u-hover-feature u-text u-text-5"
                    data-animation-name="counter"
                    data-animation-event="scroll"
                    data-animation-duration="3000"
                  >
                    <div class="amount" value="0">0</div>
                  </h3>
                </div>
              </div>
              <div
                class="u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-container-style u-image u-layout-cell u-size-15 u-image-2"
                data-image-width="1280"
                data-image-height="743"
                data-animation-name="flipIn"
                data-animation-duration="1000"
                data-animation-direction="X"
                data-animation-delay="250"
              >
                <div id="water" class="u-container-layout u-container-layout-2 drink">
                  <h4 class="u-align-center u-text u-text-black u-text-6">Veggie</h4>
                  <h2 class="u-align-center u-text u-text-7">{{vegetarian_price}}</h2>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-3 plus"
                    ><span class="u-file-icon u-icon"
                      ><img src="{{ url_for('static',filename='images/4315609.png')}}" alt=""
                    /></span>
                  </button>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-4 minus"
                    >&nbsp;<span class="u-file-icon u-icon u-icon-5"
                      ><img src="{{ url_for('static',filename='images/4436695.png')}}" alt=""
                    /></span>
                  </button>
                  <h3
                    class="u-align-center u-hover-feature u-text u-text-8"
                    data-animation-name="counter"
                    data-animation-event="scroll"
                    data-animation-duration="3000"
                  >
                    <div class="amount" value="0">0</div>
                  </h3>
                </div>
              </div>
              <div
                class="u-container-style u-image u-layout-cell u-size-15 u-image-3"
                data-image-width="1280"
                data-image-height="853"
                data-animation-name="flipIn"
                data-animation-duration="1000"
                data-animation-direction="X"
                data-animation-delay="500"
              >
                <div id="icetea" class="u-container-layout u-container-layout-3 drink">
                  <h4 class="u-align-center u-text u-text-9">Kind normal</h4>
                  <h2 class="u-align-center u-text u-text-10">{{kid_normal_price}}</h2>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-5 plus"
                    ><span class="u-file-icon u-icon"
                      ><img src="{{ url_for('static',filename='images/4315609.png')}}" alt=""
                    /></span>
                  </button>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-6 minus"
                    >&nbsp;<span class="u-file-icon u-icon u-icon-7"
                      ><img src="{{ url_for('static',filename='images/4436695.png')}}" alt=""
                    /></span>
                  </button>
                  <h3
                    class="u-align-center u-hover-feature u-text u-text-11"
                    data-animation-name="counter"
                    data-animation-event="scroll"
                    data-animation-duration="3000"
                  >
                     <div class="amount" value="0">0</div>
                  </h3>
                </div>
              </div>
              <div
                class="u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-container-style u-image u-layout-cell u-right-cell u-size-15 u-image-4"
                data-image-width="1280"
                data-image-height="1267"
                data-animation-name="flipIn"
                data-animation-duration="1000"
                data-animation-direction="X"
                data-animation-delay="750"
              >
                <div id="kid_vegetarian" class="u-container-layout u-container-layout-4 drink">
                  <h4 class="u-align-center u-text u-text-body-alt-color u-text-12">Kind Veggie</h4>
                  <h2 class="u-align-center u-text u-text-body-alt-color u-text-13">{{kid_vegetarian_price}}</h2>
                  <button class="u-align-left u-border-none u-btn u-button-style u-none u-btn-7 plus"
                    ><span class="u-file-icon u-icon"
                      ><img src="{{ url_for('static',filename='images/4315609.png')}}" alt=""
                    /></span>
                  </button>
                  <button class="u-align-left u-border-none u-btn u-button-style u-none u-btn-8 minus"
                    >&nbsp;<span class="u-file-icon u-icon u-icon-9"
                      ><img src="{{ url_for('static',filename='images/4436695.png')}}" alt=""
                    /></span>
                  </button>
                  <h3
                    class="u-align-center u-hover-feature u-text u-text-body-alt-color u-text-14"
                    data-animation-name="counter"
                    data-animation-event="scroll"
                    data-animation-duration="3000"
                  >
                     <div class="amount" value="0">0</div>
                  </h3>
                </div>
              </div>
            </div>
          </div>
        </div>
        <a
          class="u-border-none u-btn u-btn-round u-button-style u-gradient u-none u-radius-27 u-text-body-alt-color u-btn-9"
          id="bestaetigen"
          >Best채tigen!</a
        >
      </div>
    </section>
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-3161">
      <div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">
          Created with&nbsp;&nbsp;<span class="u-file-icon u-icon"
            ><img src="{{ url_for('static',filename='images/3756484.png')}}" alt=""
          /></span>
          by Robin Busch und Jan Sellerbeck
        </p>
      </div>
    </footer>
  </body>
  <!-- SCRIPT -->
  <script>
   const type = document.getElementsByClassName("drink");
   let orderList = { beer: {{beer_ct}}, water: {{water_ct}}, icetea: {{icetea_ct}}, kid_vegetarian: {{soft_ct}}}; // final order list with the drink type and amount
    // Calls function bestellen if button with id "bestellen" is pressed
       toUpdate = type[0].getElementsByClassName("amount")[0];
       toUpdate.setAttribute("value", orderList.beer);
       toUpdate.innerHTML = orderList.beer;
       toUpdate = type[1].getElementsByClassName("amount")[0];
       toUpdate.setAttribute("value", orderList.water);
       toUpdate.innerHTML = orderList.water;
       toUpdate = type[2].getElementsByClassName("amount")[0];
       toUpdate.setAttribute("value", orderList.icetea);
       toUpdate.innerHTML = orderList.icetea;
       toUpdate = type[3].getElementsByClassName("amount")[0];
       toUpdate.setAttribute("value", orderList.kid_vegetarian);
       toUpdate.innerHTML = orderList.kid_vegetarian;

    document.getElementById("bestaetigen").addEventListener("click", () => {
      bestaetigen();
    });

    for (let x = 0; x < type.length; x++) {
      const plus = type[x].getElementsByClassName("plus")[0];
      const minus = type[x].getElementsByClassName("minus")[0];
      const amount = type[x].getElementsByClassName("amount")[0];

      /* When plus button is pressed */
      plus.addEventListener("click", () => {
        const newAmount = parseInt(amount.getAttribute("value")) + 1;
        amount.setAttribute("value", newAmount);
        amount.innerHTML = newAmount;
        orderList[type[x].id] = newAmount;
      });

      /* When minus button is pressed */
      minus.addEventListener("click", () => {
        if (parseInt(amount.getAttribute("value")) > 0) {
          const newAmount = parseInt(amount.getAttribute("value")) - 1;
          amount.setAttribute("value", newAmount);
          amount.innerHTML = newAmount;
          orderList[type[x].id] = newAmount;
        }
      });
    }



    // Fills the decimal number with zeros
    function addDecimal(number) {
      let decimals = number.toString().split(".");
      let newNumber;
      if (typeof decimals[1] == "undefined") {
        newNumber = decimals[0] + ",00";
      } else if (decimals[1].length === 1) {
        newNumber = decimals[0] + "," + decimals[1] + "0";
      } else {
        newNumber = number.toString().replace(".", ",");
      }

      return newNumber;
    }

    function bestaetigen()
    {
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() { // listen for state changes
  if (xhr.readyState === 4 && xhr.status === 200) { // when completed we can move away
    window.location = "/home";
  }
}
      xhr.open("POST", "/home", true);
      xhr.setRequestHeader("Accept", "application/json");
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.send(JSON.stringify(orderList));
      console.log(orderList);
    }

  </script>
</html>
