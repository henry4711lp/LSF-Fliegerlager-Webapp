<!DOCTYPE html>
<html style="font-size: 16px;" lang="de"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>mealselector</title>
    <link rel="stylesheet" href="{{ url_for('static',filename='styles/nicepage.css')}}" media="screen">
<link rel="stylesheet" href="{{ url_for('static',filename='styles/mealselector.css')}}" media="screen">
    <script class="u-script" type="text/javascript" src="{{ url_for('static',filename='jquery.js')}}" defer=""></script>
    <script class="u-script" type="text/javascript" src="{{ url_for('static',filename='nicepage.js')}}" defer=""></script>
    <meta name="generator" content="Nicepage 4.19.3, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="{{ url_for('static',filename='styles/fonts/fonts.css')}}">
    <link id="u-page-google-font" rel="stylesheet" href="{{ url_for('static',filename='styles/mealselector-fonts.css')}}">

    <script type="application/ld+json">{
		"@type": "Organization",
		"name": "Site1",
		"logo": "images/logo_trans.svg"
}</script>
    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="mealselector">
    <meta property="og:description" content="">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body u-xl-mode" data-lang="de"><header class="u-clearfix u-header u-header" id="sec-015a"><div class="u-clearfix u-sheet u-valign-middle u-sheet-1">
        <h1 class="u-custom-font u-font-raleway u-text u-text-default u-title u-text-1">LSF Strichliste</h1>
        <a  class="u-image u-logo u-image-1" data-image-width="1500" data-image-height="1409">
          <img src="{{ url_for('static',filename='images/logo_trans.svg')}}" class="u-logo-image u-logo-image-1">
        </a>
      </div></header>
    <section class="u-align-center u-clearfix u-section-1" id="sec-1963">
      <div class="u-clearfix u-sheet u-sheet-1">
        <h2 class="u-text u-text-1"> Essen für den {{mealdate}}&nbsp; <span class="u-file-icon u-icon"><img src="{{ url_for('static',filename='images/4721221.png')}}" alt=""></span> &nbsp;
        </h2>
        <h4 class="u-text u-text-2">Halbe Portion</h4>
        <h4 class="u-text u-text-3">Normale Po​rtion</h4>
        <div class="u-clearfix u-expanded-width u-gutter-20 u-layout-wrap u-layout-wrap-1">
          <div class="u-gutter-0 u-layout">
            <div class="u-layout-row">
              <div class="u-align-center u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-container-style u-layout-cell u-left-cell u-shape-rectangle u-size-15 u-layout-cell-1" data-animation-name="flipIn" data-animation-duration="1000" data-animation-direction="X">
                <div id="normal" class="u-container-layout u-container-layout-1 meal">
                  <h4 class="u-text u-text-4">Normal</h4>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-1 plus">
                      <span class="u-file-icon u-icon"><img src="{{ url_for('static',filename='images/4315609.png')}}" alt=""></span>
                  </button>
                    <h3
                    class="u-align-center u-hover-feature u-text u-text-5"
                    data-animation-name="counter"
                    data-animation-event="scroll"
                    data-animation-duration="3000"
                  >
                     <div class="amount" value="0">0</div>
                  </h3>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-2 minus">&nbsp;<span class="u-file-icon u-icon u-icon-3"><img src="{{ url_for('static',filename='images/4436695.png')}}" alt=""></span>
                  </button>
                </div>
              </div>

              <div class="u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-container-style u-layout-cell u-shape-rectangle u-size-15 u-layout-cell-2" data-animation-name="flipIn" data-animation-duration="1000" data-animation-direction="X" data-animation-delay="250">
                <div id="vegetarian" class="u-container-layout u-container-layout-2 meal">
                  <h4 class="u-align-center u-text u-text-black u-text-6">Vegetarisch</h4>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-3 plus"><span class="u-file-icon u-icon"><img src="{{ url_for('static',filename='images/4315609.png')}}" alt=""></span>
                  </button>
                    <h3
                    class="u-align-center u-hover-feature u-text u-text-5"
                    data-animation-name="counter"
                    data-animation-event="scroll"
                    data-animation-duration="3000"
                  >
                        <div class="amount" value="0">0</div>
                  </h3>
                  <button class="u-border-none u-btn u-button-style u-none u-btn-4 minus">&nbsp;<span class="u-file-icon u-icon u-icon-5"><img src="{{ url_for('static',filename='images/4436695.png')}}" alt=""></span>
                  </button>
                </div>
              </div>
              <div class="u-container-style u-layout-cell u-shape-rectangle u-size-15 u-layout-cell-3" data-animation-name="flipIn" data-animation-duration="1000" data-animation-direction="X" data-animation-delay="500">
                <div id="kid_normal" class="u-container-layout u-container-layout-3 meal">
                  <h4 class="u-align-center u-text u-text-8">Kinder normal </h4>
                  <button  class="u-border-none u-btn u-button-style u-none u-btn-5 plus"><span class="u-file-icon u-icon"><img src="{{ url_for('static',filename='images/4315609.png')}}" alt=""></span>
                  </button>
                    <h3
                    class="u-align-center u-hover-feature u-text u-text-5"
                    data-animation-name="counter"
                    data-animation-event="scroll"
                    data-animation-duration="3000"
                  >
                     <div class="amount" value="0">0</div>
                  </h3>
                  <button  class="u-border-none u-btn u-button-style u-none u-btn-6 minus">&nbsp;<span class="u-file-icon u-icon u-icon-7"><img src="{{ url_for('static',filename='images/4436695.png')}}" alt=""></span>
                  </button>

                </div>
              </div>
              <div class="u-border-no-bottom u-border-no-left u-border-no-right u-border-no-top u-container-style u-layout-cell u-right-cell u-shape-rectangle u-size-15 u-layout-cell-4" data-animation-name="flipIn" data-animation-duration="1000" data-animation-direction="X" data-animation-delay="750">
                <div id="kid_vegetarian" class="u-container-layout u-container-layout-4 meal">
                  <h4 class="u-align-center u-text u-text-10">Kinder Vegetarisch</h4>
                  <button  class="u-align-left u-border-none u-btn u-button-style u-none u-btn-7 plus" ><span class="u-file-icon u-icon"><img src="{{ url_for('static',filename='images/4315609.png')}}" alt=""></span>
                  </button>
                    <h3
                    class="u-align-center u-hover-feature u-text u-text-5"
                    data-animation-name="counter"
                    data-animation-event="scroll"
                    data-animation-duration="3000"
                  >
                     <div class="amount" value="0">0</div>
                  </h3>
                  <button  class="u-align-left u-border-none u-btn u-button-style u-none u-btn-8 minus">&nbsp;<span class="u-file-icon u-icon u-icon-9"><img src="{{ url_for('static',filename='images/4436695.png')}}" alt=""></span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <a id="bestaetigen" class="u-border-none u-btn u-btn-round u-button-style u-gradient u-none u-radius-27 u-text-body-alt-color u-btn-9">Bestätigen!</a>
      </div>
      
     <div id="total"></div>
      
      
    </section>
    
    
    <footer class="u-align-center u-clearfix u-footer u-grey-80 u-footer" id="sec-3161"><div class="u-clearfix u-sheet u-sheet-1">
        <p class="u-small-text u-text u-text-variant u-text-1">Created with&nbsp;&nbsp;<span class="u-file-icon u-icon"><img src="{{ url_for('static',filename='imagesimages/3756484.png')}}" alt=""></span> by Robin Büsch und Jan Selleri
        </p>
      </div></footer>
    <section class="u-backlink u-clearfix u-grey-80">
      <a class="u-link"  target="_blank">
        <span>Website Templates</span>
      </a>
      <p class="u-text">
        <span>created with</span>
      </p>
      <a class="u-link" href="" target="_blank">
        <span>Website Builder Software</span>
      </a>

    </section>
    </body>

<script>


   const type = document.getElementsByClassName("meal");
    const price = { normal: 1, vegetarian: 1, kid_normal: 1, kid_vegetarian: 1 }; // Price list
    let orderList = { normal: 0, vegetarian: 0, kid_normal: 0, kid_vegetarian: 0 }; // final order list with the drink type and amount
    let count = {{ count | tojson }};
    // Calls function bestellen if button with id "bestellen" is pressed

    document.getElementById("bestaetigen").addEventListener("click", () => {
      bestaetigen();
    });

    for (let x = 0; x < type.length; x++) {
      const plus = type[x].getElementsByClassName("plus")[0];
      const minus = type[x].getElementsByClassName("minus")[0];
      const amount = type[x].getElementsByClassName("amount")[0];

     /* When plus button is pressed */
  plus.addEventListener("click", () => {
    count[type[x].id]++;
    amount.innerHTML = count[type[x].id];
    orderList[type[x].id] = count[type[x].id];
    calcTotal();
  });

  /* When minus button is pressed */
  minus.addEventListener("click", () => {
    if (count[type[x].id] > 0) {
      count[type[x].id]--;
      amount.innerHTML = count[type[x].id];
      orderList[type[x].id] = count[type[x].id];
      calcTotal();
    }
  });
    }

    // Calculates the total pricing
    function calcTotal() {
  const length = Object.keys(orderList).length;
  let total = 0;

  for (let x = 0; x < length; x++) {
    const priceForType = price[Object.keys(orderList)[x]];
    total = total + orderList[Object.keys(orderList)[x]] * priceForType;
  }

  document.getElementById("total").innerHTML = addDecimal(Math.round(total * 100) / 100) + " €";
}

    // Fills the decimal number with zeros
    function addDecimal(number) {
      let decimals = number.toString().split(".");
      let newNumber;
      if (typeof decimals[1] == "undefined") {
        newNumber = decimals[0] + ",00";
      } else if (decimals[1].length == 1) {
        newNumber = decimals[0] + "," + decimals[1] + "0";
      } else {
        newNumber = number.toString().replace(".", ",");
      }

      return newNumber;
    }

   // Post to database

    function bestaetigen()
    {
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "/home", true);
      xhr.setRequestHeader("Accept", "application/json");
      xhr.setRequestHeader('Content-Type', 'application/json');
      xhr.send(JSON.stringify(orderList));
      console.log(orderList);
    }



</script>
</html>